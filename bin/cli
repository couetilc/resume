#!/usr/bin/env bash

command="$1"

case $command in
  help)
    echo "CLI tools for developing my résumé"
    echo "  commands: dev, build, test"
    ;;

  dev)
    (trap 'kill 0' SIGINT
    npx parcel src/index.html & npx nodemon -w dist/index.html -x "time node pdf.js")
    ;;

  build)
    npx parcel build src/index.html
    npx http-server -a localhost -p 1234 dist >/dev/null &
    pid_server=$!
    node pdf.js
    kill $pid_server
    ;;

  test)
    echo "no tests"
    exit 1
    ;;

  serve)
    npx parcel build src/index.html
    npx http-server -a localhost -p 1234 dist &
    node pdf.js
    ;;
esac
